<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista posiłków</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1>Lista posiłków</h1>

    <!-- Dodaj tabelkę z posiłkami po lewej stronie -->
    <table>
        <thead>
            <tr>
                <th>Data</th>
                <th>Nazwa</th>
                <th>Ilość (g)</th>
                <th>Kalorie</th>
                <th>Białko</th>
                <th>Węglowodany</th>
                <th>Tłuszcz</th>
                <th>Akcje</th>
            </tr>
        </thead>
        <tbody>
            {% for date, meals in weekly_meals.items() %}
            {% for meal in meals %}
            <tr>
                <td class="editable-date" data-meal-id="{{ meal.id }}">{{ meal.date }}</td>
                <td>{{ meal.name }}</td>
                <td class="editable-grams" data-meal-id="{{ meal.id }}">{{ meal.grams }}</td>
                <td class="editable-calories" data-meal-id="{{ meal.id }}">{{ meal.calories }}</td>
                <td class="editable-protein" data-meal-id="{{ meal.id }}">{{ meal.protein }}</td>
                <td class="editable-carbohydrates" data-meal-id="{{ meal.id }}">{{ meal.carbohydrates }}</td>
                <td class="editable-fat" data-meal-id="{{ meal.id }}">{{ meal.fat }}</td>
                <td>
                    <form method="post" action="/delete_meal/{{ meal.id }}">
                        <input type="hidden" name="_method" value="DELETE">
                        <button type="submit">Usuń</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
            {% endfor %}
        </tbody>
    </table>

    <!-- Dodaj tabelkę z sumami wartości odżywczych po prawej stronie -->
    <div style="float: right; margin-left: 20px;">
        <h2>Sumy wartości odżywczych</h2>
        <table>
            <thead>
                <tr>
                    <th>Data</th>
                    <th>Dzień tygodnia</th>
                    <th>Suma kalorii</th>
                    <th>Suma białka</th>
                    <th>Suma węglowodanów</th>
                    <th>Suma tłuszczu</th>
                </tr>
            </thead>
            <tbody>
                {% for daily_total in daily_totals %}
                <tr>
                    <td>{{ daily_total.date }}</td>
                    <td>{{ daily_total.day_of_week }}</td>
                    <td>{{ daily_total.total_calories }}</td>
                    <td>{{ daily_total.total_protein }}</td>
                    <td>{{ daily_total.total_carbohydrates }}</td>
                    <td>{{ daily_total.total_fat }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <a href="/search">Wyszukaj posiłek</a>

    <script>
        // Obsługa edycji daty
        // ...

        // Dodaj obsługę edycji ilości gram
        // ...
    </script>
</body>
</html>
